//////////////////////////////////////
// CONFIGURAÃ‡Ã•ES INICIAIS

UserName = GetUserInfos().PlayerName
UniverseName = GetUniverseName()
Language = GetLanguage()

telegramId = TELEGRAM_CHAT_ID

fsMade = 0

//////////////////////////////////////
// FUNÃ‡Ã•ES DE ENVIO

func SendAll(msg) {
    Print(msg)
    SendTelegram(telegramId, msg)
//    SendDiscord(DISCORD_WEBHOOK_URL, msg)
}


//////////////////////////////////////
// INÃCIO

intro = "ğŸš€ InÃ­cio do envio de frotas de Luas para Planetas " + UserName + " (" + UniverseName + " | " + Language + ")"
SendAll(intro)

moons = GetCachedMoons()

for moon in moons {
    origin = moon.Coordinate
    destination = NewCoordinate(origin.Galaxy, origin.System, origin.Position, PLANET_TYPE)

    // Simula uma pausa de anÃ¡lise humana
    Sleep(Random(1000, 3000))

    // CriaÃ§Ã£o da frota
    fleet = NewFleet()
    fleet.SetOrigin(origin)
    fleet.SetDestination(destination)
    fleet.SetMission(PARK)
    fleet.AddShips(LARGECARGO, 5000)

    // Envio da frota
    fleet, err = fleet.SendNow()

    if err != nil {
        errorMsg = "âš ï¸ Erro ao enviar frota\nğŸŒ™ De: " + origin + "\nğŸª Para: " + destination + "\nâŒ Erro: " + err
        LogError(err)
        SendAll(errorMsg)
        Sleep(Random(1000, 2000))
    } else {
        successMsg = "âœ… Frota enviada com sucesso!\nğŸŒ™ De: " + origin + "\nğŸª Para: " + destination + "\nğŸšš MissÃ£o: Estacionar"
        fsMade += 1
        SendAll(successMsg)
        Sleep(Random(7000, 15000))  // Delay mais humano
    }
}

//////////////////////////////////////
// FINALIZAÃ‡ÃƒO

conclusion = "ğŸ¯ Fim do processo por " + UserName + " (" + UniverseName + " | " + Language + ")"
summary = "ğŸ“¦ Total de frotas enviadas com sucesso: " + fsMade

SendAll(conclusion)
SendAll(summary)
